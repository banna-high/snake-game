# Snake Game 项目设计文档

## 需求分析
### 待讨论的关键点
1. **游戏核心玩法**
   - 基础设置（休闲模式）：
     * 初始移动速度较慢，随分数缓慢提升
     * 无惩罚机制，撞到自身可穿过
     * 每次吃到食物增加1分
     * 特殊道具有额外加分
   - 穿墙机制：
     * 从左边界穿越至右边界
     * 从右边界穿越至左边界
     * 从上边界穿越至下边界
     * 从下边界穿越至上边界
   - 食物生成机制
   - 道具系统
   - 计分规则
   - 游戏难度设置

2. **游戏界面设计**
   - 游戏区域大小
   - 蛇和食物的视觉表现
   - 分数显示方式
   - 游戏状态展示（开始、暂停、结束）

3. **游戏控制**
   - 键盘控制系统：
     * WASD：控制蛇的移动方向
       - W：向上移动
       - A：向左移动
       - S：向下移动
       - D：向右移动
     * 空格键：临时加速
       - 按住时速度提升50%
       - 释放后恢复正常速度
       - 加速时蛇身带有特殊的加速光效
     * ESC：暂停游戏
     * P：截图保存当前分数
     * M：静音切换
     * R：快速重启
     * Q：退出到主菜单
   
   - 加速机制：
     * 基础移动速度：每格200ms
     * 加速时移动速度：每格100ms
     * 加速时消耗能量值
     * 能量值系统：
       - 初始能量值：100
       - 加速时每秒消耗20点能量
       - 不加速时每秒恢复10点能量
       - 吃到食物立即恢复30点能量
       - 能量不足时无法加速
   
   - 操作反馈：
     * 按键时显示按键特效
     * 转向时有缓动动画
     * 加速时屏幕边缘显示速度线
     * 能量不足时按键提示特效
     * 方向键按下时对应方向出现光波

4. **游戏特色功能**
   - 赛博朋克道具系统
     - **黑客模块**：
       * 外观：闪烁的数据方块
       * 效果：暂时显示所有道具位置
       * 持续时间：10秒
       * 视觉效果：屏幕边缘显示代码雨效果

     - **全息分身**：
       * 外观：半透明的蛇的投影
       * 效果：生成一个AI控制的分身蛇协助收集食物
       * 持续时间：15秒
       * 视觉效果：分身带有故障效果

     - **时间扭曲器**：
       * 外观：螺旋状的时钟图案
       * 效果：暂时减缓游戏速度
       * 持续时间：8秒
       * 视觉效果：屏幕轻微扭曲，时间波纹

     - **神经增幅器**：
       * 外观：脑波形状的能量球
       * 效果：蛇可以瞬间转向，取消转向惯性
       * 持续时间：12秒
       * 视觉效果：蛇身发出脉冲光效

     - **量子隧道**：
       * 外观：旋转的紫色传送门
       * 效果：可以在地图上任意位置创建一对传送门
       * 使用次数：1次
       * 视觉效果：传送时产生粒子效果

     - **数据碎片**：
       * 外观：漂浮的数据碎片
       * 效果：收集后临时增加分数倍率
       * 持续时间：10秒
       * 视觉效果：分数显示故障艺术效果

     - **系统故障**：
       * 外观��闪烁的错误代码
       * 效果：随机触发一个特殊效果
       * 视觉效果：屏幕短暂故障效果

   - 道具生成规则：
     - 基础食物常驻场上
     - 每30秒随机生成一个特殊道具
     - 同时最多存在2个特殊道具
     - 道具持续时间20秒，未收集自动消失

   - 视觉反馈系统：
     - 道具剩余时间用环形进度条显示
     - 特效状态用屏幕边缘光效展示
     - 得分时显示全息投影数字
     - 道具即将消失时闪烁提示

   - 音效系统：
     - 每个道具独特的电子音效
     - 特殊效果激活时的环绕音效
     - 背景音乐会根据状态动态调整

5. **技术实现考虑**
   - 游戏状态管理
   - 碰撞检测机制
   - 动画效果
   - 性能优化

6. **用户体验**
   - 游戏教程/引导
   - 音效和视觉反馈
   - 响应式适配

## 项目结构
```
snake-game/
├── node_modules/          # 依赖包目录
├── public/               # 静态资源目录
├── src/                  # 源代码目录
│   ├── assets/          # 资源文件目录
│   ├── main.tsx         # 应用入口文件
│   ├── App.tsx          # 根组件
│   ├── App.css          # 根组件样式
│   ├── index.css        # 全局样式
│   └── vite-env.d.ts    # TypeScript 环境声明文件
├── package.json         # 项目配置和依赖管理
├── package-lock.json    # 依赖版本锁定文件
├── tsconfig.json        # TypeScript 主配置
├── tsconfig.node.json   # Node 环境 TypeScript 配置
├── tsconfig.app.json    # 应用 TypeScript 配置
├── vite.config.ts       # Vite 构建工具配置
├── eslint.config.js     # ESLint 代码规范配置
├── index.html           # HTML 入口文件
└── .gitignore          # Git 忽略文件配置
```

## 技术栈
- **框架**: React + TypeScript
- **构建工具**: Vite
- **包管理器**: npm
- **代码规范**: ESLint
- **开发语言**: TypeScript

## 技术要点
1. **TypeScript 配置**
   - 使用严格模式
   - 配置多个 tsconfig 文件以适应不同环境

2. **项目架构**
   - 采用 React 函数式组件
   - 使用 TypeScript 进行类型检查
   - Vite 作为开发和构建工具

3. **代码质量**
   - ESLint 进行代码规范检查
   - TypeScript 类型系统确保代码质量

4. **开发环境**
   - 支持热更新
   - 开发时提供实时反馈

## 后续开发计划
1. 实现贪吃蛇游戏核心逻辑
2. 添加游戏界面和交互
3. 实现分数系统
4. 添加游戏难度设置
5. 优化游戏性能和��户体验

## 注意事项
- 确保代码遵循 TypeScript 类型规范
- 保持组件的可复用性和可维护性
- 注意游戏性能优化
- 遵循 React 最佳实践 

## 界面设计详细方案
### 整体视觉风格
- **主题**: 赛博朋克近未来风格
- **配色方案**:
  - 主色调: 霓虹紫 (#B026FF)
  - 辅助色: 霓虹蓝 (#00FFFF)、霓虹粉 (#FF10F0)
  - 背景色: 深邃黑 (#0A0A0A)
  - 强调色: 荧光绿 (#39FF14)

### 游戏区域设计
1. **游戏场地**
   - 黑色磨砂背景，带有细微的网格纹理
   - 边界使用霓虹灯管效果，随机闪烁
   - 尺寸: 20x20 网格，每格 30px
   - 网格线采用发光效果，低亮度显示
   - 边界设计：
     * 边界处添加数字化传送门效果
     * 穿越时显示空间扭曲动画
     * 对应边界显示匹配的能量波纹
   - 道具效果区域：
     * 道具激活时的范围指示器
     * 全息投影效果边界
     * 数据流动画效果
     * 能量场可视化

2. **蛇的设计**
   - 蛇身: 半透明发光体，类似光纤效果
   - 蛇头: 带有科技感的箭头设计
   - 移动时有光流效果
   - 转向时有粒子特效
   - 穿越效果：
     * 穿越时蛇身带有数字化分解效果
     * 重组时显示全息重构动画
     * 穿越过程中留下残影

3. **食物设计**
   - 主食物: 全息投影风格的像素方块
   - 特殊食物: 带有脉冲光效的能量球
   - 生成时有数字化特效

### 界面元素
1. **计分板**
   - 位置: 游戏区域右侧
   - 风格: 类似全息投影显示器
   - 显示内容: 当前分数、最高分、游戏时间
   - 数字采用赛博朋克字体，带有故障艺术效果

2. **控制面板**
   - 位置: 游戏区域左侧
   - 包含：
     - 开始/暂停按钮（霓虹灯管风格）
     - 难度选择器（全息投影风格）
     - 音量控制（科技感滑块）
     - 能量值显示器：
       * 环形进度条显示剩余能量
       * 低能量时闪烁警告
       * 加速时显示消耗动画
     - 控制说明：
       * 半透明悬浮面板
       * 键位图标带有霓虹描边
       * 交互时显示按键动画

3. **游戏状态显示**
   - 开始界面: 带有故障艺术效果的标题
   - 暂停界面: 半透明黑色遮罩，显示"PAUSED"
   - 结束界面: 全屏故障效果，显示分数统计

### 动画效果
1. **过渡效果**
   - 场景切换: 故障艺术风格转场
   - 菜单切换: 全息投影效果
   - 按钮交互: 霓虹灯闪烁效果
   - 穿墙效果:
     * 空间扭曲动画
     * 数字化分解重组
     * 能量波纹传递
     * 全息投影残影

2. **特殊效果**
   - 蛇吃到食物: 能量波纹扩散
   - 游戏结束: 电子故障效果
   - 得分更新: 数字跳动效果
   - 加速相关效果：
     * 加速时蛇身拖尾效果
     * 能量消耗时的粒子效果
     * 速度线视差效果
     * 转向时的动态模糊
   - 能量系统效果：
     * 能量恢复时的脉冲光效
     * 能量耗尽时的警告闪烁
     * 获得能量时的数值跳动

### 响应式设计
- 桌面端: 完整显示所有视觉效果
- 平板端: 保持主要视觉效果，简化部分动画
- 移动端: 精简版界面，保持核心视觉风格

### 音效设计
- 背景音乐: 赛博朋克电子音乐
- 操作音效: 科技感按键音
- 吃食物音效: 能量获取音效
- 游戏结束音效: 电子故障音